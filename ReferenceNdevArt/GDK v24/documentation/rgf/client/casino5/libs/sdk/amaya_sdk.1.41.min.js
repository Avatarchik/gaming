/*
 * Copyright (c) 2013 Amaya Gaming Inc. All Rights Reserved.
 * Unauthorized copying of this file, via any medium is strictly prohibited.
 * Proprietary and confidential.
 */
var amaya=amaya||{};amaya.sdk=amaya.sdk||{};amaya.sdk.currency=amaya.sdk.currency||{};amaya.sdk.singleplayer=amaya.sdk.singleplayer||{};amaya.sdk.singleplayer.messaging=amaya.sdk.singleplayer.messaging||{};amaya.sdk.sound=amaya.sdk.sound||{};amaya.sdk.sound.events=amaya.sdk.sound.events||{};amaya.sdk.ui=amaya.sdk.ui||{};amaya.sdk.ui.canvas=amaya.sdk.ui.canvas||{};amaya.sdk.utils=amaya.sdk.utils||{};amaya.sdk.currency.Currency={};
(function(){function b(b,a){if(isNaN(b))return b;var e=String(b),f;"-"===e.charAt(0)&&(f=!0,e=e.substr(1));if(-1===e.indexOf("."))e=e+c.decimalSeparator+"00";else{var d=e.split(".");1===String(d[1]).length?e=d[0]+c.decimalSeparator+d[1]+"0":2===String(d[1]).length?e=d[0]+c.decimalSeparator+d[1]:2<String(d[1]).length&&(e=d[0]+c.decimalSeparator+String(d[1]).substr(0,2))}if(a.useThousandsSeparators){for(var d=e.split(c.decimalSeparator),e=d[0].split(""),d=d[1],g=0,k=e.length;0<k;k--)3===g?(e.splice(k,
0,c.thousandsSeparator),g=1):g++;g="";for(k=0;k<e.length;k++)g+=e[k];e=g+c.decimalSeparator+d}if(0===c.decimalPlaces||a.forceNoDecimals)e=e.substring(0,e.lastIndexOf(c.decimalSeparator));if(d=a.useSymbol)l&&!h.allowSymbolsInPFF&&(d=!1),!l&&!h.allowSymbolsInPFR&&(d=!1);d&&(e=c.leftOriented?c.symbol+String(e):String(e)+c.symbol);a.appendCurrencyCode&&(e=e+" "+c.code);f&&(e="-"+e);return e}var a="XXX",c,f,g,l,d={},h={};amaya.sdk.currency.Currency=function(){throw"Currency cannot be instantiated";};amaya.sdk.currency.Currency.configure=
function(b,a,c){f=$(b);g=a;l=c;b=function(b,a){for(var c=0;c<a.length;c++)if(void 0===b.attr(a[c]))throw b.prop("tagName")+" does not contain required attribute '"+a[c]+"'.";};if(0==f.find("switches").length)throw"currencyconfig does not contain required node 'switches'";a=["allowSymbolsInPFF","allowSymbolsInPFR"];for(c=0;c<a.length;c++)if(0==f.find("switches "+a[c]).length)throw"currencyconfig does not contain required node 'switches."+a[c]+"'";if(0==f.find("formats").length)throw"currencyconfig does not contain required node 'formats'";
a=["basic","integer","standard","full","extended"];for(c=0;c<a.length;c++){var j=f.find("formats format[id='"+a[c]+"']");if(0==j.length)throw"currencyconfig does not contain a format node for id '"+a[c]+"'";b(j,["id","useSymbol","useThousandsSeparators","appendCurrencyCode","forceNoDecimals"])}if(0==f.find("currencies").length)throw"currencyconfig does not contain required node 'currencies'";a=f.find("currencies currency");for(c=0;c<a.length;c++){j=$(a[c]);b(j,["code"]);var m=j.find("def");if(0==
m.length)throw"currencyconfig.currencies.currency.@"+j.attr("code")+" does not contain any 'def' nodes";for(var n=0;n<m.length;n++){if(!$(m[n]).attr("lang"))throw"currencyconfig.currencies.currency.@"+j.attr("code")+" contains a def node with no lang param.";if(0==$(m[n]).find("props").length)throw"currencyconfig.currencies.currency.@"+j.attr("code")+" does not contain a 'props' node.";b($(m[n]).find("props"),["symbol","left","decimal","thousands","decimalPlaces"])}if(0==j.find("def[lang='default']").length)throw"currencyconfig.currencies.currency.@"+
j.attr("code")+" does not contain a 'def' node with 'lang=\"default\"'";}f.find("switches").children().each(function(){var b=$(this);h[b.prop("tagName")]="true"==b.text()});f.find("format").each(function(){var b=$(this);d[b.attr("id")]={useSymbol:"true"==b.attr("useSymbol"),useThousandsSeparators:"true"==b.attr("useThousandsSeparators"),appendCurrencyCode:"true"==b.attr("appendCurrencyCode"),forceNoDecimals:"true"==b.attr("forceNoDecimals")}})};amaya.sdk.currency.Currency.initialize=function(b){a=
!b?"XXX":b;c=amaya.sdk.currency.Currency.getCurrencyDescription(a)};amaya.sdk.currency.Currency.getCurrencyDescription=function(b){var a=f.find("currency[code='"+b+"'] def[lang='"+g+"'] props"),c=f.find("currency[code='"+b+"'] def[lang='default'] props");if(0==a.length&&0==c.length)throw"No currency description declared for '"+b+"'";a=0<a.length?a:c;return{code:b,symbol:a.attr("symbol"),leftOriented:"true"==a.attr("left"),decimalSeparator:a.attr("decimal"),thousandsSeparator:a.attr("thousands"),decimalPlaces:Number(a.attr("decimalPlaces"))}};
amaya.sdk.currency.Currency.basicFormat=function(a){return b(a,d.basic)};amaya.sdk.currency.Currency.integerFormat=function(a){return b(a,d.integer)};amaya.sdk.currency.Currency.standardFormat=function(a){return b(a,d.standard)};amaya.sdk.currency.Currency.fullFormat=function(a){return b(a,d.full)};amaya.sdk.currency.Currency.extendedFormat=function(a){return b(a,d.extended)}})();amaya.sdk.singleplayer.messaging.V2ConfirmHandEndReq=function(){return new amaya.sdk.singleplayer.messaging.V2Req(amaya.sdk.singleplayer.messaging.V2ConfirmHandEndReq.CONFIRM_HAND_END_REQUEST)};amaya.sdk.singleplayer.messaging.V2ConfirmHandEndReq.CONFIRM_HAND_END_REQUEST="ConfirmHandEndReq";amaya.sdk.singleplayer.messaging.V2GameLoginReq=function(){return new amaya.sdk.singleplayer.messaging.V2Req(amaya.sdk.singleplayer.messaging.V2GameLoginReq.GAME_LOGIN_REQUEST)};amaya.sdk.singleplayer.messaging.V2GameLoginReq.GAME_LOGIN_REQUEST="LoginReq";amaya.sdk.singleplayer.messaging.V2GameLoginResponse=function(b){return{getPlayerName:function(){return $(b).find("data[name$=displayName]>value").text()},getNickName:function(){return $(b).find("data[name$=nickName]>value").text()}}};amaya.sdk.singleplayer.messaging.V2PreResumeReq=function(b){var a=new amaya.sdk.singleplayer.messaging.V2Req(amaya.sdk.singleplayer.messaging.V2PreResumeReq.RESUME_GAME_REQUEST);a.append('<data name="resumeFlag" value="0"/>');b&&a.append('<data name="resumeSessionId" value="'+b+'"/>');return a};amaya.sdk.singleplayer.messaging.V2PreResumeReq.RESUME_GAME_REQUEST="ResumeGameReq";amaya.sdk.singleplayer.messaging.V2PreResumeResponse=function(b){return{isResumed:function(){return"true"===$(b).find("data[name$=isResume]").attr("value")},getGameName:function(){return $(b).find("data[name$=gameName]").attr("value")}}};amaya.sdk.singleplayer.messaging.V2Req=function(b){var a={},c=[];a.getName=function(){return b};a.append=function(a){c.push(a)};a.getRequestData=function(){for(var a='<msgdata reqName="'+b+'">',g=0;g<c.length;g++)a+=c[g];return a+"</msgdata>"};return a};amaya.sdk.singleplayer.messaging.V2ResumeGameReq=function(b){var a=new amaya.sdk.singleplayer.messaging.V2Req(amaya.sdk.singleplayer.messaging.V2ResumeGameReq.RESUME_GAME_REQUEST);a.append('<data name="resumeFlag" value="-1"/>');a.append('<data name="gameName" value="'+b+'"/>');return a};amaya.sdk.singleplayer.messaging.V2ResumeGameReq.RESUME_GAME_REQUEST="ResumeGameReq";amaya.sdk.singleplayer.messaging.V2ResumeGameResponse=function(b){return{getDisplayPJ:function(){return"1"===$(b).find("data[name$=displayPJ]>value").text()},getBreakDown:function(){return"1"===$(b).find("data[name$=breakDown]>value").text()},getPotsNames:function(){return $(b).find("data[name$=potsNames]>value").text()},getPotsAmount:function(){return Number($(b).find("data[name$=potsAmount]>value").text())}}};amaya.sdk.singleplayer.messaging.V2StartGameReq=function(){return new amaya.sdk.singleplayer.messaging.V2Req(amaya.sdk.singleplayer.messaging.V2StartGameReq.START_GAME_REQUEST)};amaya.sdk.singleplayer.messaging.V2StartGameReq.START_GAME_REQUEST="StartGameReq";amaya.sdk.singleplayer.messaging.V2StartGameResponse=function(b){return{getFreeGameModeOffer:function(){return"1"===$(b).find("data[name$=freeGameModeOffer]>value").text()},getDisplayPJ:function(){return"1"===$(b).find("data[name$=displayPJ]>value").text()},getBreakDown:function(){return"1"===$(b).find("data[name$=breakDown]>value").text()},getPotsNames:function(){return $(b).find("data[name$=potsNames]>value").text()},getPotsAmount:function(){return Number($(b).find("data[name$=potsAmount]>value").text())}}};amaya.sdk.singleplayer.V2Game={};
(function(){amaya.sdk.singleplayer.V2Game=function(){throw"V2Game cannot be instantiated";};amaya.sdk.singleplayer.V2Game.init=function(b,a){function c(h){switch(h.data.name){case amaya.sdk.singleplayer.messaging.V2GameLoginReq.GAME_LOGIN_REQUEST:d.gameInfo.isResumed()&&!d.egiInfo.isEGI()?d.sendV2XMLRequest((new amaya.sdk.singleplayer.messaging.V2PreResumeReq(d.gameInfo.resumeSessionId())).getRequestData()):d.sendV2XMLRequest((new amaya.sdk.singleplayer.messaging.V2StartGameReq).getRequestData());break;
case amaya.sdk.singleplayer.messaging.V2StartGameReq.START_GAME_REQUEST:h=h.data.response;d.setBalanceDisplay(g);d.setWageredDisplay(0);d.removeEventListener(amaya.api.events.IncomingMessageEvent.INCOMING_MESSAGE,c);d.removeEventListener(amaya.api.events.GameFinanceUpdateEvent.GAME_FINANCE_UPDATE,f);b?b(h,g):d.showError("Start Game handler not declared","Start Game handler not declared");break;case amaya.sdk.singleplayer.messaging.V2ResumeGameReq.RESUME_GAME_REQUEST:l?(h=h.data.response,d.setBalanceDisplay(g),
d.setWageredDisplay(0),d.removeEventListener(amaya.api.events.IncomingMessageEvent.INCOMING_MESSAGE,c),d.removeEventListener(amaya.api.events.GameFinanceUpdateEvent.GAME_FINANCE_UPDATE,f),a?a(h,g):d.showError("Resume Game handler not declared","Resume Game handler not declared")):(h=new amaya.sdk.singleplayer.messaging.V2PreResumeResponse(h.data.response),h.isResumed()&&h.getGameName()===d.gameInfo.gameName()?(l=!0,d.sendV2XMLRequest((new amaya.sdk.singleplayer.messaging.V2ResumeGameReq(d.gameInfo.gameName())).getRequestData())):
d.showError("Game Server returned different resume data than what was expected","Game Server returned different resume data than what was expected"))}}function f(a){g=a.data.balance}var g,l=!1,d=new amaya.GameServices;d.addEventListener(amaya.api.events.IncomingMessageEvent.INCOMING_MESSAGE,c);d.addEventListener(amaya.api.events.GameFinanceUpdateEvent.GAME_FINANCE_UPDATE,f);d.sendV2XMLRequest((new amaya.sdk.singleplayer.messaging.V2GameLoginReq).getRequestData())}})();amaya.sdk.sound.events.SoundCompleteEvent=function(b){return new amaya.api.events.Event(amaya.sdk.sound.events.SoundCompleteEvent.COMPLETE,{id:b})};amaya.sdk.sound.events.SoundCompleteEvent.COMPLETE="soundCompleteEvent";amaya.sdk.sound.events.SoundFailedEvent=function(b){return new amaya.api.events.Event(amaya.sdk.sound.events.SoundFailedEvent.FAILED,{id:b})};amaya.sdk.sound.events.SoundFailedEvent.FAILED="soundFailedEvent";amaya.sdk.sound.SoundInstance=function(b,a){var c=new amaya.api.EventDispatcher;a.addEventListener("complete",function(){c.dispatchEvent(new amaya.sdk.sound.events.SoundCompleteEvent(b))});a.addEventListener("failed",function(){c.dispatchEvent(new amaya.sdk.sound.events.SoundFailedEvent(b))});c.stop=function(){return a.stop()};c.pause=function(){return a.pause()};c.resume=function(){return a.resume()};c.setPosition=function(b){a.setPosition(b)};c.getPosition=function(){return a.getPosition()};c.getDuration=
function(){return a.getDuration()};return c};amaya.sdk.sound.SoundSystem=function(){if(amaya.sdk.sound.SoundSystem.instance)return amaya.sdk.sound.SoundSystem.instance;amaya.sdk.sound.SoundSystem.instance=new amaya.api.EventDispatcher;var b=amaya.sdk.sound.SoundSystem.instance,a=new amaya.GameServices;a.addEventListener(amaya.api.events.OptionChangeEvent.OPTION_CHANGE,function(a){a.data.option===amaya.api.events.OptionChangeEvent.SOUND_EFFECTS&&createjs.Sound.setMute(!a.data.state)});createjs.Sound.setMute(!a.options.soundEffects());b.play=
function(a,b,g){void 0===b&&(b=0);void 0===g&&(g=0);return new amaya.sdk.sound.SoundInstance(a,createjs.Sound.play(a,createjs.Sound.INTERRUPT_NONE,0,g,b))};b.stopAllSounds=function(){createjs.Sound.stop()};return b};amaya.sdk.ui.canvas.CanvasManager=function(){function b(){var a=c.frameworkInfo.devicePixelRatio(),b=c.frameworkInfo.renderWidth(),d=c.frameworkInfo.renderHeight();f.get(0).width=b*a;f.get(0).height=d*a;f.css("width",b);f.css("height",d)}var a={},c=new amaya.GameServices,f=$('<canvas id="gameCanvas"></canvas>');$("#gameContainer").append(f);c.addEventListener(amaya.api.events.GameResizeEvent.RESIZE,b);b();a.getCanvas=function(){return f.get(0)};return a};amaya.sdk.utils.DeviceUtils={isAndroid:function(){return/(Android)/i.test(navigator.userAgent)},getAndroidVersion:function(){if(amaya.sdk.utils.DeviceUtils.isAndroid())return navigator.userAgent.match(/Android\s(\d\.\d(\.\d)?)/)[0].replace("Android ","");throw"Device is not Android";},isUnsupportedAndroidBrowser:function(){return amaya.sdk.utils.DeviceUtils.isAndroid()&&!/(Chrome)/i.test(navigator.userAgent)&&!/(Firefox)/i.test(navigator.userAgent)},isIOS:function(){return/(iPhone|iPod|iPad)/i.test(navigator.userAgent)},
isIPad:function(){return/(iPad)/i.test(navigator.userAgent)},isIPhone:function(){return/(iPhone)/i.test(navigator.userAgent)},isIPod:function(){return/(iPod)/i.test(navigator.userAgent)},isMobileSafari:function(){if(amaya.sdk.utils.DeviceUtils.isIOS()&&(amaya.sdk.utils.DeviceUtils.isIPad()||amaya.sdk.utils.DeviceUtils.isIPhone()||amaya.sdk.utils.DeviceUtils.isIPod()))return/(Safari)/i.test(navigator.userAgent)&&!/(CriOS)/i.test(navigator.userAgent)},getIOSVersion:function(){if(amaya.sdk.utils.DeviceUtils.isIOS())return navigator.userAgent.match(/OS\s(\d_\d(_\d)?)/)[0].replace("OS ",
"").replace(/_/g,".");throw"Device is not iOS";},isWindowsPhone:function(){return/(Windows Phone)/i.test(navigator.userAgent)},getWindowsPhoneVersion:function(){if(amaya.sdk.utils.DeviceUtils.isWindowsPhone())return navigator.userAgent.match(/Windows Phone\s(\d\.\d(\.\d)?)/)[0].replace("Windows Phone ","");throw"Device is not Windows Phone";},isBlackBerry:function(){return/(BlackBerry)/i.test(navigator.userAgent)||/(BB10)/i.test(navigator.userAgent)},isPlayBook:function(){return/(PlayBook)/i.test(navigator.userAgent)},
isFullScreen:function(){return"standalone"in window.navigator&&window.navigator.standalone}};amaya.sdk.utils.JSONUtils={fromJSON:function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}};amaya.sdk.utils.LangUtils={};
(function(){amaya.sdk.utils.LangUtils={};amaya.sdk.utils.LangUtils.LEFT="left";amaya.sdk.utils.LangUtils.RIGHT="right";amaya.sdk.utils.LangUtils.CATALAN="ca";amaya.sdk.utils.LangUtils.SIMPLIFIED_CHINESE="cn";amaya.sdk.utils.LangUtils.CZECH="cz";amaya.sdk.utils.LangUtils.DANISH="da";amaya.sdk.utils.LangUtils.GERMAN="de";amaya.sdk.utils.LangUtils.GREEK="el";amaya.sdk.utils.LangUtils.ENGLISH="en";amaya.sdk.utils.LangUtils.SPANISH="es";amaya.sdk.utils.LangUtils.FRENCH="fr";amaya.sdk.utils.LangUtils.HEBREW=
"he";amaya.sdk.utils.LangUtils.HUNGARIAN="hu";amaya.sdk.utils.LangUtils.ITALIAN="it";amaya.sdk.utils.LangUtils.JAPANESE="ja";amaya.sdk.utils.LangUtils.KOREAN="ko";amaya.sdk.utils.LangUtils.DUTCH="nl";amaya.sdk.utils.LangUtils.NORWEGIAN="no";amaya.sdk.utils.LangUtils.POLISH="pl";amaya.sdk.utils.LangUtils.PORTUGUESE="pt";amaya.sdk.utils.LangUtils.ROMANIAN="ro";amaya.sdk.utils.LangUtils.RUSSIAN="ru";amaya.sdk.utils.LangUtils.SLOVAK="sk";amaya.sdk.utils.LangUtils.SWEDISH="sv";amaya.sdk.utils.LangUtils.TURKISH=
"tr";amaya.sdk.utils.LangUtils.TRADITIONAL_CHINESE="tw";amaya.sdk.utils.LangUtils.initializeBundle=function(b){var a=$(b).find("lang").attr("id");if(a){if(amaya.lang[a])throw"Language bundle '"+a+"' already exists.";amaya.lang[a]={};$(b).find("lang").children().each(function(){amaya.lang[a][this.nodeName]=$(this).attr("t")})}else throw"Unable to get id of language bundle.";};amaya.sdk.utils.LangUtils.getAlignment=function(b){return b===amaya.sdk.utils.LangUtils.HEBREW?amaya.sdk.utils.LangUtils.RIGHT:
amaya.sdk.utils.LangUtils.LEFT};amaya.sdk.utils.LangUtils.isLangSupported=function(b){switch(b){case amaya.sdk.utils.LangUtils.CATALAN:case amaya.sdk.utils.LangUtils.SIMPLIFIED_CHINESE:case amaya.sdk.utils.LangUtils.CZECH:case amaya.sdk.utils.LangUtils.DANISH:case amaya.sdk.utils.LangUtils.GERMAN:case amaya.sdk.utils.LangUtils.GREEK:case amaya.sdk.utils.LangUtils.ENGLISH:case amaya.sdk.utils.LangUtils.SPANISH:case amaya.sdk.utils.LangUtils.FRENCH:case amaya.sdk.utils.LangUtils.HEBREW:case amaya.sdk.utils.LangUtils.HUNGARIAN:case amaya.sdk.utils.LangUtils.ITALIAN:case amaya.sdk.utils.LangUtils.JAPANESE:case amaya.sdk.utils.LangUtils.KOREAN:case amaya.sdk.utils.LangUtils.DUTCH:case amaya.sdk.utils.LangUtils.NORWEGIAN:case amaya.sdk.utils.LangUtils.POLISH:case amaya.sdk.utils.LangUtils.PORTUGUESE:case amaya.sdk.utils.LangUtils.ROMANIAN:case amaya.sdk.utils.LangUtils.RUSSIAN:case amaya.sdk.utils.LangUtils.SLOVAK:case amaya.sdk.utils.LangUtils.SWEDISH:case amaya.sdk.utils.LangUtils.TURKISH:case amaya.sdk.utils.LangUtils.TRADITIONAL_CHINESE:return!0;
default:return!1}}})();amaya.sdk.utils.MathUtils={};(function(){amaya.sdk.utils.MathUtils={};amaya.sdk.utils.MathUtils.ROUND_DOWN=0;amaya.sdk.utils.MathUtils.ROUND_HALF=5;amaya.sdk.utils.MathUtils.ROUND_UP=9;amaya.sdk.utils.MathUtils.correctFloatingPoint=function(b,a){void 0===a&&(a=5);a=Math.abs(a);0>b&&(a*=-1);var c=Math.floor(1E3*b)+a,c=String(c).substr(0,String(c).length-1);return Number(c)/100};amaya.sdk.utils.MathUtils.randRange=function(b,a){return Math.floor(Math.random()*(a-b+1))+b}})();amaya.sdk.utils.NumberUtils={};
(function(){amaya.sdk.utils.NumberUtils.toShorthandFormat=function(b,a){if("tw"===a||"cn"===a||"ko"===a||"ja"===a){var c;return 1E8<=b?("tw"===a&&(c="\u5104"),"cn"===a&&(c="\u4ebf"),"ko"===a&&(c="\uc5b5"),"ja"===a&&(c="\u5104"),b/1E8+c):1E4<=b?("tw"===a&&(c="\u842c"),"cn"===a&&(c="\u4e07"),"ko"===a&&(c="\ub9cc"),"ja"===a&&(c="\u4e07"),b/1E4+c):1E3<=b?("tw"===a&&(c="\u5343"),"cn"===a&&(c="\u5343"),"ko"===a&&(c="\ucc9c"),"ja"===a&&(c="\u5343"),b/1E3+c):String(b)}return 1E9<=b?b/1E9+"B":1E6<=b?b/1E6+
"M":1E3<=b?b/1E3+"K":String(b)}})();amaya.sdk.utils.PathUtils={initialize:function(b,a){amaya.sdk.utils.PathUtils.lang=b;amaya.sdk.utils.PathUtils.remotePath=a;amaya.sdk.utils.PathUtils.initialize=void 0},filterLang:function(b){return b.replace("${lang}",amaya.sdk.utils.PathUtils.lang)},toRemoteGame:function(b){return amaya.sdk.utils.PathUtils.remotePath+"/"+b}};amaya.sdk.utils.StringUtils={};(function(){amaya.sdk.utils.StringUtils={replace:function(b){for(var a=1;a<arguments.length;a++)b=b.replace(RegExp("\\{"+(a-1)+"\\}","g"),arguments[a]);return b}}})();
